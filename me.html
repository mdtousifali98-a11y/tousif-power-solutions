<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Billing Panel</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{
font-family: Arial;
margin:0;
background:#f2f2f2;
}

.dark{
background:#121212;
color:white;
}

.container{
padding:20px;
}

input,select,button{
padding:8px;
margin:5px;
}

.bill-box{
background:white;
padding:15px;
border-radius:10px;
margin-top:10px;
}

.dark .bill-box{
background:#1e1e1e;
}

</style>
</head>

<body>

<div class="container">

<h2>âš¡ Admin Billing Dashboard</h2>

<button onclick="toggleDark()">ðŸŒ™ Toggle Dark Mode</button>

<hr>

<h3>Generate Invoice</h3>

Customer Name  
<input id="custName">

Amount  
<input id="amount" type="number">

GST %  
<input id="gst" type="number" value="18">

<br>

<button onclick="generateBill()">Generate Bill</button>

<div id="billOutput" class="bill-box"></div>

<hr>

<h3>QR Payment</h3>
<img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=upi://pay" />

<hr>

<h3>Digital Signature Upload</h3>
<input type="file" id="signUpload">

<hr>

<h3>Online Booking Link</h3>
<input id="bookingLink" placeholder="Paste booking URL">

<hr>

<h3>Sales Graph</h3>
<canvas id="salesChart"></canvas>

</div>

<script>

// Serial Number
let serial = localStorage.getItem("billSerial") || 1

function generateBill(){

let name = document.getElementById("custName").value
let amount = Number(document.getElementById("amount").value)
let gst = Number(document.getElementById("gst").value)

let gstAmt = amount * gst / 100
let cgst = gstAmt / 2
let sgst = gstAmt / 2
let total = amount + gstAmt

let billNo = "INV" + serial

serial++
localStorage.setItem("billSerial", serial)

// Save Cloud Storage (Demo)
let bills = JSON.parse(localStorage.getItem("bills") || "[]")

bills.push({
billNo,name,amount,total
})

localStorage.setItem("bills", JSON.stringify(bills))

document.getElementById("billOutput").innerHTML = `
<h3>Invoice : ${billNo}</h3>
Customer : ${name} <br>
Amount : â‚¹${amount} <br>
CGST : â‚¹${cgst.toFixed(2)} <br>
SGST : â‚¹${sgst.toFixed(2)} <br>
Total : â‚¹${total.toFixed(2)} <br>

<button onclick="sendWhatsapp('${name}',${total})">
Send WhatsApp Invoice
</button>
`

updateChart()
}

function sendWhatsapp(name,total){
let msg = Invoice for ${name} Amount â‚¹${total}
window.open(https://wa.me/?text=${msg})
}

function toggleDark(){
document.body.classList.toggle("dark")
}

function updateChart(){

let bills = JSON.parse(localStorage.getItem("bills") || "[]")

let data = bills.map(b => b.total)
let labels = bills.map(b => b.billNo)

new Chart(document.getElementById("salesChart"),{
type:"bar",
data:{
labels:labels,
datasets:[{
label:"Sales",
data:data
}]
}
})

}

updateChart()

</script>

</body>
</html>
