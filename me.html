<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tousif Power Billing</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>

body{
font-family:Arial;
background:#eaeaea;
margin:0;
}

/* Dashboard */

.container{
max-width:900px;
margin:auto;
padding:15px;
background:white;
margin-top:20px;
border-radius:10px;
box-shadow:0 0 10px gray;
}

input{
width:100%;
padding:8px;
margin:5px 0;
}

button{
padding:8px 15px;
background:#0b7dda;
color:white;
border:none;
border-radius:5px;
cursor:pointer;
}

/* TABLE */

table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

table,th,td{
border:1px solid black;
padding:6px;
text-align:center;
}

/* BILL A4 */

.bill{
width:210mm;
min-height:automm;
padding:15mm;
border:2px solid black;
background:outo;
margin:auto;
margin-top:20px;
display:none;
}

.header{
display:flex;
justify-content:space-between;
}

.sign{
display:flex;
justify-content:space-between;
margin-top:80px;
}

</style>
</head>

<body>

<div class="container">

<h2>⚡ Tousif Power Billing Panel</h2>

Customer Name
<input id="name">

Customer Phone
<input id="phone">

<table id="itemTable">
<tr>
<th>Item</th>
<th>Qty</th>
<th>Price</th>
<th>Total</th>
</tr>
</table>

<button onclick="addItem()">Add Item</button>

Labour Charge
<input id="labour" type="number" value="0">

GST %
<input id="gst" type="number" value="18">

<br><br>
<button onclick="generateBill()">Generate Bill</button>

</div>

<!-- BILL -->

<div id="bill" class="bill">

<div class="header">
<div>
<h2>M/S Tousif Power Solutions</h2>
Malda, West Bengal <br>
GSTIN : 19ABCDE1234F1Z5
</div>

<div>
Bill No : <span id="billNo"></span><br>
Date : <span id="date"></span>
</div>
</div>

<hr>

Customer : <span id="bName"></span><br>
Phone : <span id="bPhone"></span>

<table id="billTable">
<tr>
<th>Item</th>
<th>Qty</th>
<th>Price</th>
<th>Total</th>
</tr>
</table>

<br>

Subtotal : ₹ <span id="sub"></span><br>
CGST : ₹ <span id="cgst"></span><br>
SGST : ₹ <span id="sgst"></span><br>

<h3>Grand Total : ₹ <span id="grand"></span></h3>

<div class="sign">
<div>
Customer Signature
</div>

<div>
Authorized Signature & Seal
</div>
</div>

<br>
<button onclick="downloadPDF()">Download PDF</button>

</div>


<script>

/* ADD ITEM */

function addItem(){

let row=document.getElementById("itemTable").insertRow()

row.innerHTML=`
<td><input></td>
<td><input type="number" value="1"></td>
<td><input type="number" value="0"></td>
<td class="t">0</td>
`
}

/* SERIAL */

let billSerial=localStorage.getItem("serial")||1001

function generateBill(){

let table=document.getElementById("itemTable")
let billTable=document.getElementById("billTable")

billTable.innerHTML=`<tr>
<th>Item</th><th>Qty</th><th>Price</th><th>Total</th>
</tr>`

let subtotal=0

for(let i=1;i<table.rows.length;i++){

let item=table.rows[i].cells[0].children[0].value
let qty=Number(table.rows[i].cells[1].children[0].value)
let price=Number(table.rows[i].cells[2].children[0].value)

let total=qty*price
subtotal+=total

billTable.innerHTML+=`
<tr>
<td>${item}</td>
<td>${qty}</td>
<td>${price}</td>
<td>${total}</td>
</tr>`
}

let labour=Number(document.getElementById("labour").value)
subtotal+=labour

let gst=Number(document.getElementById("gst").value)
let gstAmt=subtotal*gst/100

let cgst=gstAmt/2
let sgst=gstAmt/2
let grand=subtotal+gstAmt

document.getElementById("bill").style.display="block"

document.getElementById("billNo").innerText=billSerial
document.getElementById("date").innerText=new Date().toLocaleDateString()

document.getElementById("bName").innerText=document.getElementById("name").value
document.getElementById("bPhone").innerText=document.getElementById("phone").value

document.getElementById("sub").innerText=subtotal.toFixed(2)
document.getElementById("cgst").innerText=cgst.toFixed(2)
document.getElementById("sgst").innerText=sgst.toFixed(2)
document.getElementById("grand").innerText=grand.toFixed(2)

billSerial++
localStorage.setItem("serial",billSerial)

}

/* PDF */

function downloadPDF(){

let opt={
margin:5,
filename:'Invoice.pdf',
html2canvas:{scale:2},
jsPDF:{unit:'mm',format:'a4',orientation:'portrait'}
}

html2pdf().set(opt).from(document.getElementById("bill")).save()
}

</script>

</body>
</html>
