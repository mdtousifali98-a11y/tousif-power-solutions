<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Pro Bill Generator</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>

body{
font-family: Arial;
background:#f2f2f2;
padding:20px;
}

.container{
background:white;
padding:20px;
border-radius:10px;
max-width:700px;
margin:auto;
}

.bill{
border:2px solid black;
padding:15px;
margin-top:20px;
display:none;
background:white;
}

table{
width:100%;
border-collapse:collapse;
margin-top:10px;
}

table, th, td{
border:1px solid black;
padding:6px;
text-align:center;
}

button{
padding:8px 15px;
margin-top:10px;
cursor:pointer;
}

.logo{
width:80px;
height:80px;
object-fit:cover;
}

</style>
</head>

<body>

<div class="container">

<h2>Invoice Form</h2>

Logo Upload  
<input type="file" id="logoInput"><br><br>

Customer Name  
<input id="name"><br><br>

Service Name  
<input id="service"><br><br>

Amount  
<input id="amount" type="number"><br><br>

GST %  
<input id="gst" type="number" value="18"><br><br>

Customer WhatsApp Number  
<input id="whatsapp" placeholder="91xxxxxxxxxx"><br>

<button onclick="createBill()">Generate Bill</button>

</div>


<!-- BILL DESIGN -->

<div id="billBox" class="bill">

<div style="display:flex;justify-content:space-between;align-items:center">
<img id="billLogo" class="logo">
<h2>M/S Tousif Power Solutions</h2>
</div>

<hr>

Bill No : <span id="billNo"></span><br>
Customer : <span id="bName"></span>

<table>
<tr>
<th>Service</th>
<th>Amount</th>
</tr>

<tr>
<td id="bService"></td>
<td id="bAmount"></td>
</tr>

</table>

<br>

CGST : ₹ <span id="cgst"></span> <br>
SGST : ₹ <span id="sgst"></span> <br>
Grand Total : ₹ <span id="total"></span>

<br><br>

<button onclick="downloadPDF()">Download PDF</button>
<button onclick="sendWhatsApp()">Send WhatsApp</button>

</div>



<script>

let serial = localStorage.getItem("serial") || 1001

function createBill(){

let name = document.getElementById("name").value
let service = document.getElementById("service").value
let amount = Number(document.getElementById("amount").value)
let gst = Number(document.getElementById("gst").value)

let gstAmt = amount * gst / 100
let cgst = gstAmt / 2
let sgst = gstAmt / 2
let total = amount + gstAmt

document.getElementById("billBox").style.display="block"

document.getElementById("billNo").innerText = serial
document.getElementById("bName").innerText = name
document.getElementById("bService").innerText = service
document.getElementById("bAmount").innerText = "₹"+amount
document.getElementById("cgst").innerText = cgst.toFixed(2)
document.getElementById("sgst").innerText = sgst.toFixed(2)
document.getElementById("total").innerText = total.toFixed(2)

serial++
localStorage.setItem("serial",serial)

}


/* Logo Upload */

document.getElementById("logoInput").addEventListener("change",function(){

let reader = new FileReader()

reader.onload = function(e){
document.getElementById("billLogo").src = e.target.result
}

reader.readAsDataURL(this.files[0])

})



/* PDF Download */

function downloadPDF(){

let element = document.getElementById("billBox")

html2pdf().from(element).save("Invoice.pdf")

}



/* WhatsApp Send */

function sendWhatsApp(){

let number = document.getElementById("whatsapp").value

let name = document.getElementById("bName").innerText
let total = document.getElementById("total").innerText

let message = Hello ${name}, Your bill total is ₹${total}

let url = https://wa.me/${number}?text=${encodeURIComponent(message)}

window.open(url,"_blank")

}

</script>

</body>
</html>
