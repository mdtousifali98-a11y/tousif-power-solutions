<!DOCTYPE html>
<html>
<head>
<title>Admin Panel</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
font-family:Arial;
padding:20px;
background:#f0f6ff;
}

input,button{
padding:8px;
margin:5px;
}

table{
width:100%;
border-collapse:collapse;
margin-top:20px;
}

td,th{
border:1px solid black;
padding:8px;
text-align:center;
}

.invoice{
background:white;
padding:20px;
width:794px;
margin:auto;
border:2px solid black;
}

.logo{
text-align:center;
font-size:22px;
font-weight:bold;
}
</style>
</head>

<body>

<h2>Invoice Admin Panel</h2>

Customer Name <input id="cname">
Labour Charge <input id="labour" type="number">

<hr>

Item Name <input id="item">
Qty <input id="qty" type="number">
Price <input id="price" type="number">

<button onclick="addItem()">Add Item</button>

<table id="table">
<tr>
<th>Item</th>
<th>Qty</th>
<th>Price</th>
<th>Total</th>
</tr>
</table>

<h3>Total: ₹ <span id="total">0</span></h3>

<button onclick="saveBill()">Save Bill</button>
<button onclick="printBill()">Print</button>
<button onclick="pdfBill()">PDF</button>

<hr>

<div class="invoice" id="invoice">

<div class="logo">
M/S Tousif Power Solutions <br>
Mobile: 8250687140
</div>

<hr>

Customer: <span id="icname"></span>
<br><br>

<table id="itable"></table>

<br>
Labour: ₹ <span id="ilabour"></span>
<br>
Grand Total: ₹ <span id="itotal"></span>

<br><br><br>

Signature ___  
Seal ___

</div>

<script>

let total=0;
let items=[];

function addItem(){
let name=item.value;
let q=qty.value;
let p=price.value;

let t=q*p;
total+=t;

items.push({name,q,p,t});

let row=table.insertRow();
row.insertCell(0).innerText=name;
row.insertCell(1).innerText=q;
row.insertCell(2).innerText=p;
row.insertCell(3).innerText=t;

document.getElementById("total").innerText=total;
}

function saveBill(){
localStorage.setItem("bill",JSON.stringify(items));
alert("Saved");
}

function printBill(){
generateInvoice();
window.print();
}

function generateInvoice(){
icname.innerText=cname.value;

itable.innerHTML="";
items.forEach(i=>{
itable.innerHTML+=`<tr>
<td>${i.name}</td>
<td>${i.q}</td>
<td>${i.p}</td>
<td>${i.t}</td>
</tr>`;
});

ilabour.innerText=labour.value;

let gt=Number(total)+Number(labour.value);
itotal.innerText=gt;
}

async function pdfBill(){
generateInvoice();

const { jsPDF } = window.jspdf;
let pdf=new jsPDF();

pdf.html(document.getElementById("invoice"),{
callback:function(pdf){
pdf.save("invoice.pdf");
}
});

}

</script>

</body>
</html>
